<!DOCTYPE html>
<html lang="ca">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sol·licitud Projecta’t</title>

<style>
body{font-family:Arial, sans-serif;background:#fff;margin:0;padding:40px 20px;}
.container{max-width:950px;margin:auto;}
h1{text-align:center;margin-bottom:40px;}
.section{margin-bottom:40px;}
.section h2{margin-bottom:15px;font-size:18px;}
.row{display:flex;gap:20px;margin-bottom:15px;flex-wrap:wrap;}
input,select{flex:1;padding:10px;border-radius:6px;border:1px solid #ccc;font-size:14px;}
.checkbox-group{display:flex;flex-wrap:wrap;gap:15px;margin-top:10px;}
button{padding:10px 20px;border:none;border-radius:20px;cursor:pointer;font-size:14px;}
.btn-primary{background:#d80027;color:white;}
.btn-secondary{background:#555;color:white;}
.signature-box{border:1px solid #ccc;border-radius:8px;}
.small-text{font-size:12px;color:#555;line-height:1.4;}
</style>
</head>

<body>
<div class="container">
<h1>Sol·licitud Projecta’t</h1>

<form id="projectaForm">

<!-- 1️⃣ DADES PERSONALS -->
<div class="section">
<h2>Dades personals</h2>

<div class="row">
<input name="nom" placeholder="Nom" required>
<input name="cognoms" placeholder="Cognoms" required>
</div>

<div class="row">
<input name="nomSentit" placeholder="Nom sentit">
<input name="dni" placeholder="DNI" required>
</div>

<div class="row">
<input type="date" name="dataNaixement" required>
<input name="paisOrigen" placeholder="País d'origen">
</div>

<div class="row">
<select name="genere">
<option value="">Selecciona gènere</option>
<option value="Home">Home</option>
<option value="Dona">Dona</option>
<option value="No binari">No binari</option>
</select>
</div>
  
<div class="row">
<input name="nass" placeholder="NASS (Seguretat Social)">
<input name="adrecaParticipant" placeholder="Adreça">
</div>

<div class="row">
<input name="poblacioParticipant" placeholder="Població">
<input name="comarcaParticipant" placeholder="Comarca">
<input name="cpParticipant" placeholder="Codi postal">
</div>

<div class="row">
<input type="email" name="email" placeholder="Correu electrònic" required>
<input name="telefon" placeholder="Telèfon" required>
</div>

</div>

<!-- 2️⃣ SITUACIONS ESPECÍFIQUES -->
<div class="section">
<h2>Situacions específiques</h2>
<div class="checkbox-group">
<label><input type="checkbox" name="diversitat" value="true"> Diversitat funcional i/o trastorn mental</label>
<label><input type="checkbox" name="violencia" value="true"> Violència de gènere</label>
<label><input type="checkbox" name="terrorisme" value="true"> Víctima de terrorisme</label>
</div>
</div>

<!-- 3️⃣ DADES PROFESSIONALS / FORMATIVES -->
<div class="section">
<h2>Dades professionals / formatives</h2>

<div class="row">
<select name="interes">
<option value="">Interès a participar en aquest procés d’orientació</option>
<option value="Per adquirir competències no demostrades en acreditació de competències (continuïtat formativa)">
Per adquirir competències no demostrades en acreditació de competències (continuïtat formativa)
</option>
<option value="Per millorar la meva qualificació">
Per millorar la meva qualificació
</option>
<option value="Per actualitzar competències i adaptar-me als canvis del meu lloc de treball">
Per actualitzar competències i adaptar-me als canvis del meu lloc de treball
</option>
<option value="Per canviar de feina">
Per canviar de feina
</option>
<option value="Per adquirir habilitat personals">
Per adquirir habilitat personals
</option>
<option value="Altres">
Altres
</option>
</select>

</div>

<div class="row">
<select name="estudis">
<option value="">Estudis</option>
<option value="Sense titulació">Sense titulació</option>
<option value="Títol de graduat ESO / graduat escolar">Títol de graduat ESO / graduat escolar</option>
<option value="Títol de batxillerat">Títol de batxillerat</option>
<option value="Títol d'FP bàsica / Certificat professional de nivell 1">Títol d'FP bàsica / Certificat professional de nivell 1</option>
<option value="Títol de tècnic/a / FP grau mitjà / Certificat professional de nivell 2">Títol de tècnic/a / FP grau mitjà / Certificat professional de nivell 2</option>
<option value="Títol de tècnic/a Superior / FP grau superior / Certificat professional de nivell 3">Títol de tècnic/a Superior / FP grau superior / Certificat professional de nivell 3</option>
<option value="Estudis universitaris de 1r Cicle (diplomatura-grau)">Estudis universitaris de 1r Cicle (diplomatura-grau)</option>
<option value="Estudis universitaris de 2n Cicle (llicenciatura-màster)">Estudis universitaris de 2n Cicle (llicenciatura-màster)</option>
<option value="Estudis universitaris de 3r Cicle (doctorat)">Estudis universitaris de 3r Cicle (doctorat)</option>
<option value="Altra titulació">Altra titulació</option>
</select>

</div>

<div class="row">
<select name="categoriaProfessional">
<option value="">Categoria professional</option>
<option value="Treballadors/ores de baixa qualificació">Treballadors/ores de baixa qualificació</option>
<option value="Treballadors/ores qualificats/des">Treballadors/ores qualificats/des</option>
<option value="Tècnics/Tècniques">Tècnics/Tècniques</option>
<option value="Comandaments intermedis">Comandaments intermedis</option>
<option value="Directius/Directives">Directius/Directives</option>
</select>

</div>

<h3>Com vas conèixer aquest programa d’orientació?</h3>
<div class="checkbox-group">
<label><input type="checkbox" name="OT" value="true"> Oficina de Treball</label>
<label><input type="checkbox" name="WebConsorci" value="true"> Web del Consorci</label>
<label><input type="checkbox" name="EntitatFormacio" value="true"> Entitat de formació</label>
<label><input type="checkbox" name="Agents" value="true"> Agents econòmics i socials</label>
<label><input type="checkbox" name="Projectat" value="true"> Projecta’t orientació professional</label>
<label><input type="checkbox" name="SOC" value="true"> Cercador de cursos del SOC</label>
<label><input type="checkbox" name="WebFPG" value="true"> Web fpgencat.cat</label>
<label><input type="checkbox" name="LinkedIn" value="true"> LinkedIn</label>
<label><input type="checkbox" name="EmpresaDifusio" value="true"> Empresa</label>
<label><input type="checkbox" name="TwitterConsorci" value="true"> Twitter (X) Consorci</label>
<label><input type="checkbox" name="TwitterOcupacio" value="true"> Twitter (X) Ocupació</label>
<label><input type="checkbox" name="Amics" value="true"> Amics o familiars</label>
<label><input type="checkbox" name="Premsa" value="true"> Premsa, ràdio o televisió</label>
<label><input type="checkbox" name="AltresDifusio" value="true"> Altres</label>
</div>
</div>

<!-- 4️⃣ SITUACIÓ LABORAL -->
<div class="section">
<h2>Situació laboral</h2>

<label><input type="checkbox" id="ocupatCheck" name="ocupat" value="true"> Ocupat/ada</label>
<label><input type="checkbox" name="erto" value="true"> Afectada ERTO</label>
<label><input type="checkbox" name="cpn" value="true"> Cuidadora no professional</label>

<div class="row" id="codi3Row" style="display:none;">
<select name="codi3">
<option value="">Selecciona règim</option>

<option value="RG – Règim general">
RG – Règim general
</option>

<option value="FD – Fixos discontinus en períodes de no-ocupació">
FD – Fixos discontinus en períodes de no-ocupació
</option>

<option value="RE – Regulació d’ocupació en períodes de no-ocupació">
RE – Regulació d’ocupació en períodes de no-ocupació
</option>

<option value="AGP – Règim especial agrari per compte pròpia">
AGP – Règim especial agrari per compte pròpia
</option>

<option value="AGA – Règim especial agrari per compte d’altri">
AGA – Règim especial agrari per compte d’altri
</option>

<option value="AU – Règim especial d’autònoms">
AU – Règim especial d’autònoms
</option>

<option value="TM – Treballadors/ores inclosos/es al règim especial del mar">
TM – Treballadors/ores inclosos/es al règim especial del mar
</option>

<option value="CP – Mutualistes de Col·legis Professionals no inclosos com autònoms">
CP – Mutualistes de Col·legis Professionals no inclosos com autònoms
</option>

<option value="EH – Treballadors/ores de la llar">
EH – Treballadors/ores de la llar
</option>

<option value="DF – Treballadors/ores que accedeixen a l’atur durant el període formatiu">
DF – Treballadors/ores que accedeixen a l’atur durant el període formatiu
</option>

<option value="RLE – Treballadors/ores amb relacions laborals de caràcter especial">
RLE – Treballadors/ores amb relacions laborals de caràcter especial
</option>

<option value="CESS – Treballadors/ores amb conveni especial amb la Seguretat Social">
CESS – Treballadors/ores amb conveni especial amb la Seguretat Social
</option>

<option value="AP – Administració pública">
AP – Administració pública
</option>

<option value="FDI – Treballadors/ores a temps parcial de caràcter indefinit en períodes de no ocupació">
FDI – Treballadors/ores a temps parcial de caràcter indefinit en períodes de no ocupació
</option>

</select>


</div>
</div>

<!-- 5️⃣ EMPRESA -->
<div class="section">
<h2>Dades empresa</h2>

<div class="row">
<input name="raoSocial" placeholder="Raó social">
<input name="cif" placeholder="CIF empresa">
</div>

<div class="row">
<input name="nassEmpresa" placeholder="Núm. Seguretat Social empresa">
<input name="adrecaEmpresa" placeholder="Adreça centre de treball">
</div>

<div class="row">
<select name="midaEmpresa">
<option value="">Mida de l'empresa</option>
<option value="De 1 a 9 persones treballadores">De 1 a 9 persones treballadores</option>
<option value="De 10 a 49 persones treballadores">De 10 a 49 persones treballadores</option>
<option value="De 50 a 249 persones treballadores">De 50 a 249 persones treballadores</option>
<option value="Més de 250 persones treballadores">Més de 250 persones treballadores</option>
</select>
</div>

<div class="row">
<input name="poblacioEmpresa" placeholder="Població empresa">
<input name="comarcaEmpresa" placeholder="Comarca empresa">
<input name="cpEmpresa" placeholder="Codi postal empresa">
</div>

</div>

<!-- 6️⃣ DECLARACIONS -->
<div class="section">
<h2>Declaracions i autoritzacions</h2>

<label><input type="checkbox" name="declaro" required>
Declaro que he estat informat/ada per part de l’entitat que l’actuació d’orientació forma part dels programes subvencionats pel Consorci.
</label><br><br>

<label><input type="checkbox" name="autoritzacioDades" required>
Autoritzo al Consorci per utilitzar les meves dades personals per rebre informació.
</label><br><br>

<label><input type="checkbox" name="autoritzacioImatge" required>
Autoritzo a ser gravat/da o fotografiat/da com a participant durant 2 anys segons la normativa indicada.
</label>
</div>

<!-- 7️⃣ SIGNATURA -->
<div class="section">
<h2>Signatura</h2>

<canvas id="signaturePad" class="signature-box" width="850" height="200"></canvas>
<br><br>
<button type="button" class="btn-secondary" onclick="clearSignature()">Esborrar signatura</button>
<button type="submit" class="btn-primary">Enviar</button>

<p class="small-text">
Protecció de dades: Les dades personals seran tractades pel Consorci per a la Formació Contínua de Catalunya amb la finalitat de gestionar la vostra participació en el programa d’orientació professional. Podeu exercir els vostres drets d’accés, rectificació, supressió i altres drets segons la normativa vigent en matèria de protecció de dades.
</p>

</div>

</form>
</div>

<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>

<script>
const canvas = document.getElementById("signaturePad");
const signaturePad = new SignaturePad(canvas);

function clearSignature(){signaturePad.clear();}

document.getElementById("ocupatCheck").addEventListener("change", function(){
document.getElementById("codi3Row").style.display = this.checked ? "flex" : "none";
});

document.getElementById("projectaForm").addEventListener("submit", async function(e){
e.preventDefault();

if(signaturePad.isEmpty()){
alert("Cal signar abans d'enviar.");
return;
}

const formData = new FormData(this);
formData.append("signature", signaturePad.toDataURL());

const res = await fetch("/api/send-form",{method:"POST",body:formData});

if(res.ok){
alert("Sol·licitud enviada correctament!");
this.reset();
signaturePad.clear();
document.getElementById("codi3Row").style.display = "none";
}else{
alert("Error en l'enviament.");
}
});
</script>

</body>
</html>
