<!DOCTYPE html>
<html lang="ca">
  <style>
.popup {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

.popup-content {
  background: white;
  padding: 25px;
  border-radius: 10px;
  text-align: center;
  max-width: 400px;
  font-family: Arial, sans-serif;
}

.popup-content button {
  margin-top: 15px;
  padding: 8px 18px;
  border: none;
  background: #8B0000;
  color: white;
  border-radius: 5px;
  cursor: pointer;
}
    .buscar-cif-btn{
  display:flex;
  align-items:center;
  gap:6px;
  white-space:nowrap;
}
    .buscar-cif-btn:disabled{
  background:#ccc;
  cursor:not-allowed;
  opacity:0.7;
}
    a.btn-secondary{
  padding:10px 20px;
  border-radius:20px;
  color:white;
}

</style>

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sol¬∑licitud Projecta‚Äôt</title>

<style>
body{font-family:Arial, sans-serif;background:#fff;margin:0;padding:40px 20px;}
.container{max-width:950px;margin:auto;}
h1{text-align:center;margin-bottom:40px;}
.section{margin-bottom:40px;}
.section h2{margin-bottom:15px;font-size:18px;}
.row{display:flex;gap:20px;margin-bottom:15px;flex-wrap:wrap;}
input,select{flex:1;padding:10px;border-radius:6px;border:1px solid #ccc;font-size:14px;}
.checkbox-group{display:flex;flex-wrap:wrap;gap:15px;margin-top:10px;}
button{padding:10px 20px;border:none;border-radius:20px;cursor:pointer;font-size:14px;}
.btn-primary{background:#d80027;color:white;}
.btn-secondary{background:#555;color:white;}
.signature-box{border:1px solid #ccc;border-radius:8px;}
.small-text{font-size:12px;color:#555;line-height:1.4;}
</style>
</head>

<body>
<div class="container">
<h1>Sol¬∑licitud Projecta‚Äôt</h1>

<form id="projectaForm">

<!-- 1Ô∏è‚É£ DADES PERSONALS -->
<div class="section">
<h2>Dades personals</h2>

<div class="row">
<input name="nom" placeholder="Nom" required>
<input name="cognoms" placeholder="Cognoms" required>
</div>

<div class="row">
<input name="nomSentit" placeholder="Nom sentit">
<input name="dni" placeholder="DNI" required>
</div>

<div class="row">
<input type="date" name="dataNaixement" required>
<input name="paisOrigen" placeholder="Pa√≠s d'origen" required>
</div>

<div class="row">
<select name="genere" required>
<option value="">Selecciona g√®nere</option>
<option value="Home">Home</option>
<option value="Dona">Dona</option>
<option value="No binari">No binari</option>
</select>
</div>
  
<div class="row">
<input name="nass" placeholder="NASS (Seguretat Social)">
<input name="adrecaParticipant" placeholder="Adre√ßa" required>
</div>

<div class="row">
<input name="poblacioParticipant" placeholder="Poblaci√≥" required>
<input name="comarcaParticipant" placeholder="Comarca" required>
<input name="cpParticipant" placeholder="Codi postal" required>
</div>

<div class="row">
<input type="email" name="email" placeholder="Correu electr√≤nic" required>
<input name="telefon" placeholder="Tel√®fon" required>
</div>

</div>

<!-- 2Ô∏è‚É£ SITUACIONS ESPEC√çFIQUES -->
<div class="section">
<h2>Situacions espec√≠fiques</h2>
<div class="checkbox-group">
<label>
  <input type="checkbox" id="diversitatCheck" name="diversitat" value="true">
  Diversitat funcional i/o trastorn mental
</label>

<div id="infoPICA" style="display:none; margin-top:10px; padding:10px; background:#f5f5f5; border-radius:6px; font-size:13px;">
  Autoritzo al Consorci per a la Formaci√≥ Cont√≠nua de Catalunya a verificar el grau de discapacitat mitjan√ßant el certificat que el Departament de Drets Socials emet, a trav√©s de l‚Äôaplicaci√≥ PICA.
</div>

<label><input type="checkbox" name="violencia" value="true"> Viol√®ncia de g√®nere</label>
<label><input type="checkbox" name="terrorisme" value="true"> V√≠ctima de terrorisme</label>
</div>
</div>

<!-- 3Ô∏è‚É£ DADES PROFESSIONALS / FORMATIVES -->
<div class="section">
<h2>Dades professionals / formatives</h2>

<div class="row">
<select name="interes">
<option value="">Inter√®s a participar en aquest proc√©s d‚Äôorientaci√≥</option>
<option value="Per adquirir compet√®ncies no demostrades en acreditaci√≥ de compet√®ncies (continu√Øtat formativa)">
Per adquirir compet√®ncies no demostrades en acreditaci√≥ de compet√®ncies (continu√Øtat formativa)
</option>
<option value="Per millorar la meva qualificaci√≥">
Per millorar la meva qualificaci√≥
</option>
<option value="Per actualitzar compet√®ncies i adaptar-me als canvis del meu lloc de treball">
Per actualitzar compet√®ncies i adaptar-me als canvis del meu lloc de treball
</option>
<option value="Per canviar de feina">
Per canviar de feina
</option>
<option value="Per adquirir habilitat personals">
Per adquirir habilitat personals
</option>
<option value="Altres">
Altres
</option>
</select>

</div>

<div class="row">
<select name="estudis" required>
<option value="">Estudis</option>
<option value="Sense titulaci√≥">Sense titulaci√≥</option>
<option value="T√≠tol de graduat ESO / graduat escolar">T√≠tol de graduat ESO / graduat escolar</option>
<option value="T√≠tol de batxillerat">T√≠tol de batxillerat</option>
<option value="T√≠tol d'FP b√†sica / Certificat professional de nivell 1">T√≠tol d'FP b√†sica / Certificat professional de nivell 1</option>
<option value="T√≠tol de t√®cnic/a / FP grau mitj√† / Certificat professional de nivell 2">T√≠tol de t√®cnic/a / FP grau mitj√† / Certificat professional de nivell 2</option>
<option value="T√≠tol de t√®cnic/a Superior / FP grau superior / Certificat professional de nivell 3">T√≠tol de t√®cnic/a Superior / FP grau superior / Certificat professional de nivell 3</option>
<option value="Estudis universitaris de 1r Cicle (diplomatura-grau)">Estudis universitaris de 1r Cicle (diplomatura-grau)</option>
<option value="Estudis universitaris de 2n Cicle (llicenciatura-m√†ster)">Estudis universitaris de 2n Cicle (llicenciatura-m√†ster)</option>
<option value="Estudis universitaris de 3r Cicle (doctorat)">Estudis universitaris de 3r Cicle (doctorat)</option>
<option value="Altra titulaci√≥">Altra titulaci√≥</option>
</select>

</div>

<div class="row">
<select name="categoriaProfessional" required>
<option value="">Categoria professional</option>
<option value="Treballadors/ores de baixa qualificaci√≥">Treballadors/ores de baixa qualificaci√≥</option>
<option value="Treballadors/ores qualificats/des">Treballadors/ores qualificats/des</option>
<option value="T√®cnics/T√®cniques">T√®cnics/T√®cniques</option>
<option value="Comandaments intermedis">Comandaments intermedis</option>
<option value="Directius/Directives">Directius/Directives</option>
</select>

</div>

<h3>Com vas con√®ixer aquest programa d‚Äôorientaci√≥?</h3>
<div class="checkbox-group">
<label><input type="checkbox" name="OT" value="true"> Oficina de Treball</label>
<label><input type="checkbox" name="WebConsorci" value="true"> Web del Consorci</label>
<label><input type="checkbox" name="EntitatFormacio" value="true"> Entitat de formaci√≥</label>
<label><input type="checkbox" name="Agents" value="true"> Agents econ√≤mics i socials</label>
<label><input type="checkbox" name="Projectat" value="true"> Projecta‚Äôt orientaci√≥ professional</label>
<label><input type="checkbox" name="SOC" value="true"> Cercador de cursos del SOC</label>
<label><input type="checkbox" name="WebFPG" value="true"> Web fpgencat.cat</label>
<label><input type="checkbox" name="LinkedIn" value="true"> LinkedIn</label>
<label><input type="checkbox" name="EmpresaDifusio" value="true"> Empresa</label>
<label><input type="checkbox" name="TwitterConsorci" value="true"> Twitter (X) Consorci</label>
<label><input type="checkbox" name="TwitterOcupacio" value="true"> Twitter (X) Ocupaci√≥</label>
<label><input type="checkbox" name="Amics" value="true"> Amics o familiars</label>
<label><input type="checkbox" name="Premsa" value="true"> Premsa, r√†dio o televisi√≥</label>
<label><input type="checkbox" name="AltresDifusio" value="true"> Altres</label>
</div>
</div>

<!-- 4Ô∏è‚É£ SITUACI√ì LABORAL -->
<div class="section">
<h2>Situaci√≥ laboral</h2>

<label><input type="checkbox" id="ocupatCheck" name="ocupat" value="true"> Ocupat/ada</label>
<label><input type="checkbox" name="erto" value="true"> Afectada ERTO</label>
<label><input type="checkbox" name="cpn" value="true"> Cuidadora no professional</label>

<div class="row" id="codi3Row" style="display:none;">
<select name="codi3">
<option value="">Selecciona r√®gim</option>

<option value="RG ‚Äì R√®gim general">
RG ‚Äì R√®gim general
</option>

<option value="FD ‚Äì Fixos discontinus en per√≠odes de no-ocupaci√≥">
FD ‚Äì Fixos discontinus en per√≠odes de no-ocupaci√≥
</option>

<option value="RE ‚Äì Regulaci√≥ d‚Äôocupaci√≥ en per√≠odes de no-ocupaci√≥">
RE ‚Äì Regulaci√≥ d‚Äôocupaci√≥ en per√≠odes de no-ocupaci√≥
</option>

<option value="AGP ‚Äì R√®gim especial agrari per compte pr√≤pia">
AGP ‚Äì R√®gim especial agrari per compte pr√≤pia
</option>

<option value="AGA ‚Äì R√®gim especial agrari per compte d‚Äôaltri">
AGA ‚Äì R√®gim especial agrari per compte d‚Äôaltri
</option>

<option value="AU ‚Äì R√®gim especial d‚Äôaut√≤noms">
AU ‚Äì R√®gim especial d‚Äôaut√≤noms
</option>

<option value="TM ‚Äì Treballadors/ores inclosos/es al r√®gim especial del mar">
TM ‚Äì Treballadors/ores inclosos/es al r√®gim especial del mar
</option>

<option value="CP ‚Äì Mutualistes de Col¬∑legis Professionals no inclosos com aut√≤noms">
CP ‚Äì Mutualistes de Col¬∑legis Professionals no inclosos com aut√≤noms
</option>

<option value="EH ‚Äì Treballadors/ores de la llar">
EH ‚Äì Treballadors/ores de la llar
</option>

<option value="DF ‚Äì Treballadors/ores que accedeixen a l‚Äôatur durant el per√≠ode formatiu">
DF ‚Äì Treballadors/ores que accedeixen a l‚Äôatur durant el per√≠ode formatiu
</option>

<option value="RLE ‚Äì Treballadors/ores amb relacions laborals de car√†cter especial">
RLE ‚Äì Treballadors/ores amb relacions laborals de car√†cter especial
</option>

<option value="CESS ‚Äì Treballadors/ores amb conveni especial amb la Seguretat Social">
CESS ‚Äì Treballadors/ores amb conveni especial amb la Seguretat Social
</option>

<option value="AP ‚Äì Administraci√≥ p√∫blica">
AP ‚Äì Administraci√≥ p√∫blica
</option>

<option value="FDI ‚Äì Treballadors/ores a temps parcial de car√†cter indefinit en per√≠odes de no ocupaci√≥">
FDI ‚Äì Treballadors/ores a temps parcial de car√†cter indefinit en per√≠odes de no ocupaci√≥
</option>

</select>


</div>
</div>

<!-- 5Ô∏è‚É£ EMPRESA -->
<div class="section">
<h2>Dades empresa</h2>

<div class="row">
  <input id="raoSocialInput" name="raoSocial" placeholder="Ra√≥ social">

  <div style="display:flex; gap:10px; flex:1; align-items:center;">
    <input id="cifInput" name="cif" placeholder="CIF empresa" style="flex:1;">

    <button type="button" id="buscarCifBtn" 
        class="btn-secondary buscar-cif-btn" 
        disabled>
  üîç Cercar CIF
</button>
  </div>
</div>

<p style="font-size:13px; color:#666; margin-top:-10px;">
Escriu la Ra√≥ social i cerca el CIF si no el coneixes.
</p>


<div class="row">
<input name="nassEmpresa" placeholder="N√∫m. Seguretat Social empresa">
<input name="adrecaEmpresa" placeholder="Adre√ßa centre de treball">
</div>

<div class="row">
<select name="midaEmpresa">
<option value="">Mida de l'empresa</option>
<option value="De 1 a 9 persones treballadores">De 1 a 9 persones treballadores</option>
<option value="De 10 a 49 persones treballadores">De 10 a 49 persones treballadores</option>
<option value="De 50 a 249 persones treballadores">De 50 a 249 persones treballadores</option>
<option value="M√©s de 250 persones treballadores">M√©s de 250 persones treballadores</option>
</select>
</div>

<div class="row">
<input name="poblacioEmpresa" placeholder="Poblaci√≥ empresa">
<input name="comarcaEmpresa" placeholder="Comarca empresa">
<input name="cpEmpresa" placeholder="Codi postal empresa">
</div>

</div>

<!-- 6Ô∏è‚É£ DECLARACIONS -->
<div class="section">
<h2>Declaracions i autoritzacions</h2>

<label><input type="checkbox" name="declaro" required>
Declaro que he estat informat/ada per part de l‚Äôentitat que l‚Äôactuaci√≥ d‚Äôorientaci√≥ forma part dels programes subvencionats pel Consorci.
</label><br><br>

<label><input type="checkbox" name="autoritzacioDades">
Autoritzo al Consorci per utilitzar les meves dades personals per rebre informaci√≥.
</label><br><br>

<label><input type="checkbox" name="autoritzacioImatge">
Autoritzo a ser gravat/da o fotografiat/da com a participant durant 2 anys segons la normativa indicada.
</label>
</div>

<!-- 7Ô∏è‚É£ DOCUMENTACI√ì ADDICIONAL -->
<div class="section">
<h2>Documentaci√≥ addicional</h2>

<div class="row">
  <label>DNI o NIE:
    <input type="file" name="dniFile" accept=".pdf,.jpg,.jpeg,.png">
  </label>
</div>

<div class="row" style="align-items:center;">

  <input type="file" name="vidaLaboral" accept=".pdf,.jpg,.png" style="flex:1;">

  <a href="https://portal.seg-social.gob.es/wps/portal/importass/importass/Categorias/Vida+laboral+e+informes/Informes+sobre+tu+situacion+laboral/Informe+de+tu+vida+laboral"
     target="_blank"
     class="btn-secondary"
     style="text-decoration:none; display:flex; align-items:center; justify-content:center;">
     üìÑ La pots descarregar aqu√≠
  </a>

</div>

<div class="row">
  <label>Curr√≠culum Vitae (CV):
    <input type="file" name="cvFile" accept=".pdf,.doc,.docx">
  </label>
</div>

</div>


<!-- 7Ô∏è‚É£ SIGNATURA -->
<div class="section">
<h2>Signatura</h2>

<canvas id="signaturePad" class="signature-box" width="850" height="200"></canvas>
<br><br>
<button type="button" class="btn-secondary" onclick="clearSignature()">Esborrar signatura</button>
<button type="submit" class="btn-primary">Enviar</button>

<p class="small-text">
Protecci√≥ de dades: Les dades personals seran tractades pel Consorci per a la Formaci√≥ Cont√≠nua de Catalunya amb la finalitat de gestionar la vostra participaci√≥ en el programa d‚Äôorientaci√≥ professional. Podeu exercir els vostres drets d‚Äôacc√©s, rectificaci√≥, supressi√≥ i altres drets segons la normativa vigent en mat√®ria de protecci√≥ de dades.
</p>

</div>

</form>
</div>

<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>

<script>

document.addEventListener("DOMContentLoaded", () => {

  // ===============================
  // SIGNATURE PAD
  // ===============================

  const canvas = document.getElementById("signaturePad");
  const signaturePad = new SignaturePad(canvas);

  function clearSignature(){
    signaturePad.clear();
  }

  window.clearSignature = clearSignature;

  // ===============================
  // ENVIAMENT FORMULARI
  // ===============================

  const form = document.getElementById("projectaForm");

  form.addEventListener("submit", async function(e){
    e.preventDefault();

    if(signaturePad.isEmpty()){
      alert("Cal signar abans d'enviar.");
      return;
    }

    const formData = new FormData(this);
    formData.append("signature", signaturePad.toDataURL());

    const res = await fetch("/api/send-form", {
      method:"POST",
      body:formData
    });

    if(res.ok){
      document.getElementById("successPopup").style.display = "flex";
      this.reset();
      signaturePad.clear();
      buscarCifBtn.disabled = true; // tornar a desactivar
    } else {
      alert("Error en l'enviament.");
    }
  });

  // ===============================
  // OCUPAT ‚Üí CODI3
  // ===============================

  const ocupatCheckbox = document.getElementById("ocupatCheck");
  const codi3Row = document.getElementById("codi3Row");

  if (ocupatCheckbox && codi3Row) {
    ocupatCheckbox.addEventListener("change", function(){
      codi3Row.style.display = this.checked ? "flex" : "none";
    });
  }

  // ===============================
  // DIVERSITAT ‚Üí INFO PICA
  // ===============================

  const diversitatCheckbox = document.getElementById("diversitatCheck");
  const infoPICA = document.getElementById("infoPICA");

  if (diversitatCheckbox && infoPICA) {
    diversitatCheckbox.addEventListener("change", function(){
      infoPICA.style.display = this.checked ? "block" : "none";
    });
  }

  // ===============================
  // CERCA ASSISTIDA CIF
  // ===============================

  const buscarCifBtn = document.getElementById("buscarCifBtn");
  const raoSocialInput = document.getElementById("raoSocialInput");

  if (buscarCifBtn && raoSocialInput) {

    // comen√ßar desactivat
    buscarCifBtn.disabled = true;

    // activar quan hi hagi text
    raoSocialInput.addEventListener("input", function() {
      buscarCifBtn.disabled = this.value.trim().length === 0;
    });

    // obrir google
    buscarCifBtn.addEventListener("click", function() {
      const empresa = raoSocialInput.value.trim();
      if (!empresa) return;

      const query = encodeURIComponent(empresa + " CIF");
      window.open(`https://www.google.com/search?q=${query}`, "_blank");
    });
  }

});

// ===============================
// POPUP
// ===============================

function closePopup(){
  document.getElementById("successPopup").style.display = "none";
}

</script>


  
<div id="successPopup" class="popup">
  <div class="popup-content">
    <p>La sol¬∑licitud del programa <strong>Projecta't</strong> s'ha enviat correctament.</p>
    <button onclick="closePopup()">Acceptar</button>
  </div>
</div>

</body>
</html>
